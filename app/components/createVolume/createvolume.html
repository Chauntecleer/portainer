<rd-header>
  <rd-header-title title="Create volume">
    <i id="loadingViewSpinner" class="fa fa-cog fa-spin"></i>
  </rd-header-title>
  <rd-header-content>
    <a ui-sref="volumes">Volumes</a> > Add volume
  </rd-header-content>
</rd-header>

<div class="row">
  <div class="col-lg-12 col-md-12 col-xs-12">
    <rd-widget>
      <rd-widget-body>
        <form class="form-horizontal">
          <!-- name-input -->
          <div class="form-group">
            <label for="volume_name" class="col-sm-1 control-label text-left">Name</label>
            <div class="col-sm-11">
              <input type="text" class="form-control" ng-model="formValues.Name" id="volume_name" placeholder="e.g. myVolume">
            </div>
          </div>
          <!-- !name-input -->
          <div class="col-sm-12 form-section-title">
            Driver configuration
          </div>
          <!-- driver-input -->
          <div class="form-group">
            <label for="volume_driver" class="col-sm-1 control-label text-left">Driver</label>
            <div class="col-sm-11">
              <select class="form-control" ng-options="driver for driver in availableVolumeDrivers" ng-model="formValues.Driver" ng-if="availableVolumeDrivers.length > 0">
                <option disabled hidden value="">Select a driver</option>
              </select>
              <input type="text" class="form-control" ng-model="formValues.Driver" id="volume_driver" placeholder="e.g. driverName" ng-if="availableVolumeDrivers.length === 0">
            </div>
          </div>
          <!-- !driver-input -->
          <!-- driver-options -->
          <div class="form-group">
            <div class="col-sm-12" style="margin-top: 5px;">
              <label class="control-label text-left">
                Driver options
                <portainer-tooltip position="bottom" message="Driver options are specific to the selected driver. Please refer to the selected driver documentation."></portainer-tooltip>
              </label>
              <span class="label label-default interactive" style="margin-left: 10px;" ng-click="addDriverOption()">
                <i class="fa fa-plus-circle" aria-hidden="true"></i> add driver option
              </span>
            </div>
            <!-- driver-options-input-list -->
            <div class="col-sm-12 form-inline" style="margin-top: 10px;">
              <div ng-repeat="option in formValues.DriverOptions" style="margin-top: 2px;">
                <div class="input-group col-sm-5 input-group-sm">
                  <span class="input-group-addon">name</span>
                  <input type="text" class="form-control" ng-model="option.name" placeholder="e.g. mountpoint">
                </div>
                <div class="input-group col-sm-5 input-group-sm">
                  <span class="input-group-addon">value</span>
                  <input type="text" class="form-control" ng-model="option.value" placeholder="e.g. /path/on/host">
                </div>
                <button class="btn btn-sm btn-danger" type="button" ng-click="removeDriverOption($index)">
                  <i class="fa fa-trash" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            <!-- !driver-options-input-list -->
          </div>
          <!-- !driver-options -->
          <div class="col-sm-12 form-section-title" ng-if="applicationState.application.authentication">
            Access control
          </div>
          <!-- ownership -->
          <div class="form-group" ng-if="applicationState.application.authentication">
            <div class="col-sm-12">
              <label for="ownership" class="control-label text-left">
                Ownership
                <portainer-tooltip position="bottom" message="When setting the ownership value to private, only you and the administrators will be able to see and manage this object. When choosing team, one or multiple of your teams will be able to access it. When choosing public, everybody will be able to access it."></portainer-tooltip>
              </label>
              <div class="btn-group btn-group-sm" style="margin-left: 20px;">
                <label class="btn btn-primary" ng-model="formValues.Ownership" uib-btn-radio="'private'">
                  <i class="fa fa-eye-slash" aria-hidden="true"></i>
                  Private
                </label>
                <label class="btn btn-primary" ng-model="formValues.Ownership" uib-btn-radio="'team'">
                  <i class="fa fa-users" aria-hidden="true"></i>
                  Team
                </label>
                <label class="btn btn-primary" ng-model="formValues.Ownership" uib-btn-radio="'public'">
                  <i class="fa fa-eye" aria-hidden="true"></i>
                  Public
                </label>
              </div>
            </div>
          </div>
          <!-- !ownership -->
          <!-- authorized-groups -->
          <div class="form-group" ng-if="formValues.Ownership === 'team' && Teams.length > 1" >
            <div class="col-sm-12">
              <label for="group-access" class="control-label text-left">
                Authorized teams
                <portainer-tooltip position="bottom" message="As you are a member of multiple teams, you can select which teams(s) will be able to manage this object."></portainer-tooltip>
              </label>
              <span isteven-multi-select
               input-model="Teams"
               output-model="formValues.Ownership_groups"
               button-label="Name"
               item-label="Name"
               tick-property="ticked"
               helper-elements="filter"
               search-property="Name"
               default-label="Select one or more groups"
               orientation="horizontal"
               style="margin-left: 20px;"
             </span>
            </div>
            <!-- <div class="col-sm-9 col-lg-10"> -->
              <!--
              <ui-select multiple ng-model="formValues.Teams" close-on-select="false" title="Choose a group">
                <ui-select-match placeholder="Select one or more groups...">{{$item.Name}}</ui-select-match>
                <ui-select-choices repeat="group in Teams | filter:$select.search">
                  {{group.Name}}
                </ui-select-choices>
              </ui-select>
               -->
            <!-- </div> -->
          </div>
          <!-- !authorized-groups -->
          <!-- actions -->
          <div class="col-sm-12 form-section-title">
            Actions
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <button type="button" class="btn btn-primary btn-sm" ng-click="create()">Create volume</button>
              <a type="button" class="btn btn-default btn-sm" ui-sref="volumes">Cancel</a>
              <i id="createVolumeSpinner" class="fa fa-cog fa-spin" style="margin-left: 5px; display: none;"></i>
            </div>
          </div>
          <!-- !actions -->
        </form>
      </rd-widget-body>
    </rd-widget>
  </div>
</div>
